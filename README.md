<div align="center">

# 📊 پروژه پیش‌بینی ریزش مشتریان بانک (Customer Churn Prediction)
شناسایی مشتریان در معرض خطر ریزش و ساخت یک مدل یادگیری ماشین جهت پیش‌بینی ریزش

</div>

---

## 🎯 ۱. درباره پروژه

همانطور که می‌دانیم، هزینه جذب یک مشتری جدید بسیار بیشتر از حفظ مشتری فعلی است. بنابراین، برای بانک‌ها بسیار سودمند است که بدانند چه عواملی باعث می‌شود یک مشتری تصمیم به ترک شرکت بگیرد. پیش‌بینی و جلوگیری از ریزش مشتری به شرکت‌ها اجازه می‌دهد تا برنامه‌های وفاداری و کمپین‌های حفظ مشتری را برای نگه داشتن هرچه بیشتر مشتریان توسعه دهند.

هدف اصلی این پروژه، تحلیل داده‌های مشتریان یک بانک و ساخت یک مدل یادگیری ماشین است که بتواند با دقت بالا **احتمال خروج (Churn)** هر مشتری را پیش‌بینی کند.

---

<div dir="rtl">

### ۲. اطلاعات دیتاست
| نام ویژگی (Feature) | توضیحات | فرضیه اولیه |
| :--- | :--- | :--- |
| **CreditScore** | امتیاز اعتباری مشتری | مشتری با امتیاز اعتباری بالاتر، احتمال کمتری دارد که بانک را ترک کند. |
| **Geography** | موقعیت مکانی مشتری | موقعیت مکانی مشتری می‌تواند بر تصمیم او برای ترک بانک تأثیر بگذارد. |
| **Gender** | جنسیت مشتری | بررسی اینکه آیا جنسیت در ترک بانک توسط مشتری نقش دارد، جالب است. |
| **Age** | سن مشتری | این متغیر قطعاً مرتبط است، زیرا مشتریان مسن‌تر کمتر از جوان‌ترها بانک خود را ترک می‌کنند. |
| **Tenure** | تعداد سال‌هایی که مشتری مشتری بانک بوده است | معمولاً مشتریان قدیمی‌تر وفادارتر هستند و احتمال ترک بانک توسط آنها کمتر است. |
| **Balance** | موجودی حساب مشتری | یک شاخص بسیار خوب، زیرا افرادی که موجودی بالاتری دارند، کمتر از کسانی که موجودی پایین‌تری دارند، بانک را ترک می‌کنند. |
| **NumOfProducts** | تعداد محصولاتی که مشتری از طریق بانک خریداری کرده است | --- |
| **HasCrCard** | آیا مشتری کارت اعتباری دارد یا خیر | افرادی که کارت اعتباری دارند، احتمال کمتری دارد که بانک را ترک کنند. |
| **IsActiveMember** | آیا مشتری عضو فعال است یا خیر | مشتریان فعال احتمال کمتری دارد که بانک را ترک کنند. |
| **EstimatedSalary** | حقوق تخمینی مشتری | افرادی که حقوق پایین‌تری دارند، بیشتر از کسانی که حقوق بالاتری دارند، بانک را ترک می‌کنند. |
| **Exited** | آیا مشتری بانک را ترک کرده است یا خیر | **(متغیر هدف)** |

**نکته مهم:** تحلیل اکتشافی ما در این پروژه نشان داد که برخی از این فرضیات اولیه (مانند تأثیر سن و موجودی حساب) در واقع **برعکس** هستند و همین کشف الگوهای غیرمنتظره، قدرت علم داده را نشان می‌دهد.

</div>

---

## ⚙️ ۳. فرآیند پروژه

در این پروژه، یک فرآیند کامل علم داده از تحلیل اکتشافی تا بهینه‌سازی مدل نهایی پیاده‌سازی شده است:

### الف) تحلیل اکتشافی و مصورسازی داده‌ها (EDA)
در این مرحله، با مصورسازی داده‌ها به دنبال الگوهایی گشتیم که مشخصات مشتریان ریزشی را از مشتریان وفادار متمایز می‌کند. برخی از یافته‌های کلیدی ما عبارت بودند از:
- **سن و موجودی حساب:** برخلاف تصور اولیه، مشتریان **میان‌سال (۴۰ تا ۶۰ سال)** و آن‌هایی که **موجودی حساب قابل توجهی** داشتند، به شدت مستعد ریزش بودند.
- **تعداد محصولات:** مشتریان با **۲ محصول** بسیار وفادار، اما مشتریان با **۳ یا ۴ محصول** تقریباً همگی بانک را ترک کرده بودند!
- **جغرافیا و وضعیت فعالیت:** مشتریان ساکن **آلمان** و مشتریان **غیرفعال** نیز نرخ ریزش بسیار بالاتری داشتند.

### ب) مهندسی ویژگی و پیش‌پردازش
بر اساس یافته‌های مرحله قبل، داده‌ها برای مدل‌سازی آماده شدند:
- **ساخت ویژگی‌های جدید:** ویژگی‌های ترکیبی مانند `credit_score_rate_by_age` ساخته شد تا روابط پیچیده‌تر بین داده‌ها استخراج شود.
- **مقابله با عدم توازن:** از آنجایی که تنها ۲۰٪ از مشتریان ریزش کرده بودند، از تکنیک **SMOTE** برای متوازن‌سازی داده‌های آموزشی استفاده شد.
- **پیش‌پردازش:** ستون‌های غیرضروری حذف، متغیرهای دسته‌ای با روش **One-Hot Encoding** به فرمت عددی تبدیل و تمام داده‌ها با `StandardScaler` اسکیل شدند.

### ج) مدل‌سازی و بهینه‌سازی
چندین مدل قدرتمند روی داده‌های آماده‌شده آموزش و ارزیابی شدند:
- **مدل‌های تست شده:** `Random Forest`, `XGBoost`, `LightGBM`
- **نتایج مقایسه‌ای:**

| مدل | F1-Score | Precision | Recall | AUC |
| :--- | :---: | :---: | :---: | :---: |
| Random Forest | 0.58 | 0.65 | 0.52 | 0.74 |
| XGBoost | 0.61 | 0.69 | 0.55 | 0.77 |
| **LightGBM** | **0.63** | **0.71** | **0.57** | **0.79** |

- **انتخاب قهرمان:** مدل **LightGBM (پایه)** با **F1-Score: 0.63** و **Precision: 0.71** بهترین عملکرد را از خود نشان داد.
- **بهینه‌سازی:** با استفاده از `RandomizedSearchCV` تلاش کردیم مدل را بهینه‌سازی کنیم، اما نتایج نشان داد که تنظیمات پیش‌فرض برای این دیتاست به طرز شگفت‌انگیزی بهینه هستند.

---

## 💡 ۴. ابزارها و تکنولوژی‌ها

<div align="center">
  <img alt="Python" src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white"/>
  <img alt="Pandas" src="https://img.shields.io/badge/Pandas-150458?style=for-the-badge&logo=pandas&logoColor=white"/>
  <img alt="NumPy" src="https://img.shields.io/badge/NumPy-013243?style=for-the-badge&logo=numpy&logoColor=white"/>
  <img alt="scikit-learn" src="https://img.shields.io/badge/scikit--learn-F7931E?style=for-the-badge&logo=scikit-learn&logoColor=white"/>
  <img alt="imbalanced-learn" src="https://img.shields.io/badge/imbalanced--learn-9D467B?style=for-the-badge&logo=scikit-learn&logoColor=white"/>
  <img alt="LightGBM" src="https://img.shields.io/badge/LightGBM-992F64?style=for-the-badge&logo=lightgbm&logoColor=white"/>
  <img alt="Matplotlib" src="https://img.shields.io/badge/Matplotlib-11557C?style=for-the-badge&logo=matplotlib&logoColor=white"/>
  <img alt="Seaborn" src="https://img.shields.io/badge/Seaborn-5A7BA7?style=for-the-badge&logo=seaborn&logoColor=white"/>
</div>

---

## 🚀 ۵. نحوه اجرا و پیش‌نیازها

**پیش‌نیازها:**
- پایتون (Python 3.7+)
- کتابخانه‌های لیست شده در فایل `requirements.txt`

**مراحل اجرا:**

۱. **کلون کردن ریپازیتوری:**
```bash
git clone [https://github.com/moeindoust/BankChurnModel.git](https://github.com/moeindoust/BankChurnModel.git)
cd BankChurnModel
```



۲. **نصب کتابخانه‌های مورد نیاز:**
```bash
pip install -r requirements.txt
```

۳. **کپی کردن آدرس صحیح دیتاست:**
فایل `Churn.csv` را در پوشه اصلی پروژه قرار داده شده ، آدرس آنرا کپی کنید.

۴. **اجرای نوتبوک:**
فایل `Churn_Prediction.ipynb` را در محیط Jupyter Notebook یا JupyterLab باز کرده پس از اصلاح آدرس دیتاست سلول‌ها را به ترتیب اجرا نمایید.

## مشارکت در پروژه
برای مشارکت، لطفاً یک Fork از مخزن ایجاد کرده، تغییرات خود را اعمال و Pull Request ثبت کنید. برای گزارش مشکلات یا پیشنهادات از بخش Issues استفاده نمایید.



**توسعه‌دهنده:**  
[moeindoust](https://github.com/moeindoust)
